import{Ba as v,Ca as b,Da as d,e as n,h as r,i as c,l,o,pa as p,qa as h,v as u}from"./chunk-4DXK4BSP.js";var m={title:"About Us",content:"<p>Loading content...</p>"},f=class i{constructor(){this.http=o(h);this.settingsService=o(d);this.authService=o(b);this.notificationService=o(v);this.contentWritable=u(m);this.content=this.contentWritable.asReadonly();this.loadContent()}loadContent(){let e=`${this.settingsService.settings().dataSourceUrl}?resource=about`;this.http.get(e).pipe(r(t=>(console.error('Failed to load "About Us" content:',t),this.notificationService.show("Could not load About Us page content.","error"),n({title:"Error",content:"<p>Could not load content.</p>"})))).subscribe(t=>{this.contentWritable.set(t)})}saveContent(e){let t=`${this.settingsService.settings().dataSourceUrl}?resource=about`,s=this.authService.getToken();if(!s){console.error("Cannot save content: User is not authenticated.");return}let g=new p({"Content-Type":"application/json",Authorization:`Bearer ${s}`});this.http.post(t,e,{headers:g}).pipe(c(()=>{this.contentWritable.set(e),this.notificationService.show("About page saved successfully!")}),r(a=>(console.error('Failed to save "About Us" content:',a),this.notificationService.show("Failed to save content to the server.","error"),a.status===403&&(this.notificationService.show("Your session has expired. Please log in again.","error"),this.authService.logout()),n(null)))).subscribe()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}};export{f as a};
