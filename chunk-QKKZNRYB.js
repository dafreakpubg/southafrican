import{a as T}from"./chunk-NTSR675Z.js";import{a as D,b as x,c as N,d as _,e as M,g as I,h as B,i as P,j as U}from"./chunk-QQPOVTIS.js";import{$ as S,D as a,G as y,M as g,N as b,R as h,S as r,T as t,U as l,W as w,_ as i,a as c,b as v,ia as p,ja as E,na as C,o as f,va as F,wa as k}from"./chunk-4DXK4BSP.js";function O(s,e){s&1&&(r(0,"p",6),i(1,"Title is required."),t())}function L(s,e){s&1&&(r(0,"p",6),i(1,"Author is required."),t())}function q(s,e){s&1&&(r(0,"p",6),i(1,"Content is required."),t())}var K=class s{constructor(){this.id=E();this.blogService=f(T);this.router=f(F);this.fb=f(P);this.post=p(()=>{let e=this.id();return e?this.blogService.posts().find(n=>n.id===e):void 0});this.isEditMode=p(()=>!!this.id());this.pageTitle=p(()=>this.isEditMode()?"Edit Post":"Create New Post");this.cancelLink=p(()=>{if(this.isEditMode()){let e=this.post();return e?["/post",e.slug]:["/"]}return["/"]});this.postForm=this.fb.group({title:["",x.required],author:["",x.required],headerImageUrl:[""],content:["",x.required],tags:[""],seoTitle:[""],seoDescription:[""],seoKeywords:[""]})}ngOnInit(){let e=this.post();this.isEditMode()&&e&&this.postForm.patchValue(v(c({},e),{tags:e.tags.join(", "),seoTitle:e.seoTitle||"",seoDescription:e.seoDescription||"",seoKeywords:e.seoKeywords||""}))}onSubmit(){if(this.postForm.invalid)return;let e=this.postForm.getRawValue(),n={title:e.title,author:e.author,headerImageUrl:e.headerImageUrl||void 0,content:e.content,tags:e.tags?e.tags.split(",").map(o=>o.trim()).filter(Boolean):[],seoTitle:e.seoTitle||void 0,seoDescription:e.seoDescription||void 0,seoKeywords:e.seoKeywords||void 0};if(this.isEditMode()){let o=this.post();if(o){let m=c(c({},o),n),d=this.blogService.updatePost(m);this.router.navigate(["/post",d.slug])}}else{let o=this.blogService.addPost(n);this.router.navigate(["/post",o.slug])}}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=y({type:s,selectors:[["app-blog-form"]],inputs:{id:[1,"id"]},decls:51,vars:7,consts:[[1,"max-w-4xl","mx-auto","bg-white","rounded-lg","shadow-lg","p-6","sm:p-8"],[1,"text-3xl","sm:text-4xl","font-extrabold","text-slate-900","mb-6"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],["for","title",1,"block","text-sm","font-medium","text-slate-700"],["type","text","id","title","formControlName","title",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],[1,"mt-2","text-sm","text-red-600"],["for","author",1,"block","text-sm","font-medium","text-slate-700"],["type","text","id","author","formControlName","author",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],["for","headerImageUrl",1,"block","text-sm","font-medium","text-slate-700"],["type","text","id","headerImageUrl","formControlName","headerImageUrl","placeholder","e.g., https://example.com/image.jpg",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],["for","content",1,"block","text-sm","font-medium","text-slate-700"],["id","content","formControlName","content","rows","10","placeholder","You can use HTML for formatting, links, and images.",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],["for","tags",1,"block","text-sm","font-medium","text-slate-700"],["type","text","id","tags","formControlName","tags",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],[1,"mt-6","border","border-slate-200","rounded-lg"],[1,"p-4","cursor-pointer","font-medium","text-slate-700","hover:bg-slate-50"],[1,"p-4","border-t","border-slate-200","space-y-6","bg-slate-50"],["for","seoTitle",1,"block","text-sm","font-medium","text-slate-700"],["type","text","id","seoTitle","formControlName","seoTitle","placeholder","A specific title for search engines",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],[1,"mt-1","text-xs","text-slate-500"],["for","seoDescription",1,"block","text-sm","font-medium","text-slate-700"],["id","seoDescription","formControlName","seoDescription","rows","3","placeholder","A concise summary for search results",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],["for","seoKeywords",1,"block","text-sm","font-medium","text-slate-700"],["type","text","id","seoKeywords","formControlName","seoKeywords","placeholder","keyword1, keyword2, keyword3",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-slate-300","rounded-md","shadow-sm","placeholder-slate-400","focus:outline-none","focus:ring-[var(--color-primary-500)]","focus:border-[var(--color-primary-500)]","sm:text-sm"],[1,"mt-8","flex","justify-end","space-x-4"],[1,"px-4","py-2","border","border-slate-300","rounded-md","shadow-sm","text-sm","font-medium","text-slate-700","bg-white","hover:bg-slate-50",3,"routerLink"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-[var(--color-primary-600)]","hover:bg-[var(--color-primary-700)]","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-[var(--color-primary-500)]","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"]],template:function(n,o){if(n&1&&(r(0,"div",0)(1,"h1",1),i(2),t(),r(3,"form",2),w("ngSubmit",function(){return o.onSubmit()}),r(4,"div",3)(5,"div")(6,"label",4),i(7,"Title"),t(),l(8,"input",5),g(9,O,2,0,"p",6),t(),r(10,"div")(11,"label",7),i(12,"Author"),t(),l(13,"input",8),g(14,L,2,0,"p",6),t(),r(15,"div")(16,"label",9),i(17,"Header Image URL (Optional)"),t(),l(18,"input",10),t(),r(19,"div")(20,"label",11),i(21,"Content"),t(),l(22,"textarea",12),g(23,q,2,0,"p",6),t(),r(24,"div")(25,"label",13),i(26,"Tags (comma-separated)"),t(),l(27,"input",14),t(),r(28,"details",15)(29,"summary",16),i(30," SEO Settings (Optional) "),t(),r(31,"div",17)(32,"div")(33,"label",18),i(34,"SEO Title"),t(),l(35,"input",19),r(36,"p",20),i(37,"If empty, the main post title will be used."),t()(),r(38,"div")(39,"label",21),i(40,"SEO Description"),t(),l(41,"textarea",22),t(),r(42,"div")(43,"label",23),i(44,"SEO Keywords (comma-separated)"),t(),l(45,"input",24),t()()()(),r(46,"div",25)(47,"a",26),i(48," Cancel "),t(),r(49,"button",27),i(50," Save Post "),t()()()()),n&2){let m,d,u;a(2),S(o.pageTitle()),a(),h("formGroup",o.postForm),a(6),b((m=o.postForm.get("title"))!=null&&m.invalid&&((m=o.postForm.get("title"))!=null&&m.touched)?9:-1),a(5),b((d=o.postForm.get("author"))!=null&&d.invalid&&((d=o.postForm.get("author"))!=null&&d.touched)?14:-1),a(9),b((u=o.postForm.get("content"))!=null&&u.invalid&&((u=o.postForm.get("content"))!=null&&u.touched)?23:-1),a(24),h("routerLink",o.cancelLink()),a(2),h("disabled",o.postForm.invalid)}},dependencies:[k,C,U,M,D,N,_,B,I],encapsulation:2,changeDetection:0})}};export{K as BlogFormComponent};
